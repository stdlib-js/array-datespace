{"version":3,"file":"index.mjs","sources":["../lib/main.js","../lib/index.js"],"sourcesContent":["/**\n* @license Apache-2.0\n*\n* Copyright (c) 2021 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n// MODULES //\n\nvar hasOwnProp = require( '@stdlib/assert-has-own-property' );\nvar isInteger = require( '@stdlib/assert-is-integer' );\nvar isString = require( '@stdlib/assert-is-string' ).isPrimitive;\nvar isObject = require( '@stdlib/assert-is-object' );\nvar format = require( '@stdlib/string-format' );\nvar floor = require( '@stdlib/math-base-special-floor' );\nvar round = require( '@stdlib/math-base-special-round' );\nvar ceil = require( '@stdlib/math-base-special-ceil' );\n\n\n// VARIABLES //\n\nvar timestamp = /^\\d{10}$|^\\d{13}$/;\nvar rounders = [ 'floor', 'ceil', 'round' ];\n\n\n// FUNCTIONS //\n\n/**\n* Validates a date parameter.\n*\n* @private\n* @param {*} value - value to be validated\n* @param {string} name - name to be used in error messages\n* @throws {TypeError} value must either be a date string, Date object, Unix timestamp, or JavaScript timestamp\n* @throws {Error} numeric date must be either a Unix or JavaScript timestamp\n* @returns {Date} validated date\n*/\nfunction validDate( value, name ) {\n\tvar type;\n\n\ttype = typeof value;\n\tif ( type === 'string' ) {\n\t\tvalue = Date.parse( value );\n\t\tif ( value !== value ) {\n\t\t\tthrow new Error( format( 'invalid argument. Unable to parse %s date.', name.toLowerCase() ) );\n\t\t}\n\t\tvalue = new Date( value );\n\t}\n\tif ( type === 'number' ) {\n\t\tif ( !timestamp.test( value ) ) {\n\t\t\tthrow new Error( format( 'invalid argument. Numeric %s date must be either a Unix or JavaScript timestamp.', name.toLowerCase() ) );\n\t\t}\n\t\tif ( value.toString().length === 10 ) {\n\t\t\tvalue *= 1000; // sec to ms\n\t\t}\n\t\tvalue = new Date( value );\n\t}\n\tif ( !(value instanceof Date) ) {\n\t\tthrow new TypeError( format( 'invalid argument. %s date must either be a date string, Date object, Unix timestamp, or JavaScript timestamp.', name ) );\n\t}\n\treturn value;\n}\n\n\n// MAIN //\n\n/**\n* Generates an array of linearly spaced dates.\n*\n* @param {(Date|number|string)} start - start time as either a `Date` object, Unix timestamp, JavaScript timestamp, or date string\n* @param {(Date|number|string)} stop - stop time as either a `Date` object, Unix timestamp, JavaScript timestamp, or date string\n* @param {number} [length] - output array length (default: 100)\n* @param {Object} [options] - function options\n* @param {string} [options.round] - specifies how sub-millisecond times should be rounded: [ 'floor', 'ceil', 'round' ] (default: 'floor' )\n* @throws {TypeError} length argument must a positive integer\n* @throws {Error} must provide valid options\n* @returns {Array} array of dates\n*\n* @example\n* var stop = '2014-12-02T07:00:54.973Z';\n* var start = new Date( stop ) - 60000;\n*\n* var arr = datespace( start, stop, 6 );\n* // returns [...]\n*\n* @example\n* // Equivalent of Math.ceil():\n* var arr = datespace( 1417503655000, 1417503655001, 3, { 'round': 'ceil' } );\n* // returns [...]\n*\n* // Equivalent of Math.round():\n* arr = datespace( 1417503655000, 1417503655001, 3, { 'round': 'round' } );\n* // returns [...]\n*/\nfunction datespace( start, stop, length, options ) {\n\tvar opts;\n\tvar len;\n\tvar flg;\n\tvar arr;\n\tvar end;\n\tvar fcn;\n\tvar tmp;\n\tvar d;\n\tvar i;\n\n\tlen = 100;\n\tflg = true;\n\topts = {\n\t\t'round': 'floor'\n\t};\n\tstart = validDate( start, 'Start' );\n\tstop = validDate( stop, 'Stop' );\n\tif ( arguments.length > 2 ) {\n\t\tif ( arguments.length === 3 ) {\n\t\t\tif ( isObject( length ) ) {\n\t\t\t\topts = length;\n\t\t\t} else {\n\t\t\t\tlen = length;\n\n\t\t\t\t// Turn off checking the options object...\n\t\t\t\tflg = false;\n\t\t\t}\n\t\t} else {\n\t\t\topts = options;\n\t\t\tlen = length;\n\t\t}\n\t\tif ( len === 0 ) {\n\t\t\treturn [];\n\t\t}\n\t\tif ( !isInteger( len ) || len < 0 ) {\n\t\t\tthrow new TypeError( format( 'invalid argument. Length must be a positive integer. Value: `%s`.', len ) );\n\t\t}\n\t\tif ( flg ) {\n\t\t\tif ( !isObject( opts ) ) {\n\t\t\t\tthrow new TypeError( format( 'invalid argument. Options argument must be an object. Value: `%s`.', opts ) );\n\t\t\t}\n\t\t\tif ( hasOwnProp( opts, 'round' ) ) {\n\t\t\t\tif ( !isString( opts.round ) ) {\n\t\t\t\t\tthrow new TypeError( format( 'invalid option. `%s` option must be a string. Option: `%s`.', 'round', opts.round ) );\n\t\t\t\t}\n\t\t\t\tif ( rounders.indexOf( opts.round ) === -1 ) {\n\t\t\t\t\tthrow new Error( format( 'invalid option. `%s` option must be one of the following: \"%s\".', 'round', rounders.join( '\", \"' ) ) );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tswitch ( opts.round ) {\n\tcase 'round':\n\t\tfcn = round;\n\t\tbreak;\n\tcase 'ceil':\n\t\tfcn = ceil;\n\t\tbreak;\n\tcase 'floor':\n\tdefault:\n\t\tfcn = floor;\n\t\tbreak;\n\t}\n\n\t// Calculate the increment...\n\tend = len - 1;\n\td = ( stop.getTime() - start.getTime() ) / end;\n\n\t// Build the output array...\n\tarr = new Array( len );\n\ttmp = start;\n\tarr[ 0 ] = tmp;\n\ttmp = tmp.getTime();\n\tfor ( i = 1; i < end; i++ ) {\n\t\ttmp += d;\n\t\tarr[ i ] = new Date( fcn( tmp ) );\n\t}\n\tarr[ end ] = stop;\n\treturn arr;\n}\n\n\n// EXPORTS //\n\nmodule.exports = datespace;\n","/**\n* @license Apache-2.0\n*\n* Copyright (c) 2021 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n'use strict';\n\n/**\n* Generate an array of linearly spaced dates.\n*\n* @module @stdlib/array-datespace\n*\n* @example\n* var datespace = require( '@stdlib/array-datespace' );\n*\n* var stop = '2014-12-02T07:00:54.973Z';\n* var start = new Date( stop ) - 60000;\n*\n* var arr = datespace( start, stop, 6 );\n* // returns [...]\n*/\n\n// MODULES //\n\nvar datespace = require( './main.js' );\n\n\n// EXPORTS //\n\nmodule.exports = datespace;\n"],"names":["hasOwnProp","require$$0","isInteger","require$$1","isString","require$$2","isPrimitive","isObject","require$$3","format","require$$4","floor","require$$5","round","require$$6","ceil","require$$7","timestamp","rounders","validDate","value","name","type","Date","parse","Error","toLowerCase","test","toString","length","TypeError","lib","start","stop","options","opts","len","flg","arr","end","fcn","tmp","d","i","arguments","indexOf","join","getTime","Array"],"mappings":";;yrBAsBA,IAAIA,EAAaC,EACbC,EAAYC,EACZC,EAAWC,EAAsCC,YACjDC,EAAWC,EACXC,EAASC,EACTC,EAAQC,EACRC,EAAQC,EACRC,EAAOC,EAKPC,EAAY,oBACZC,EAAW,CAAE,QAAS,OAAQ,SAelC,SAASC,EAAWC,EAAOC,GAC1B,IAAIC,EAGJ,GAAc,YADdA,SAAcF,GACW,CAExB,IADAA,EAAQG,KAAKC,MAAOJ,KACLA,EACd,MAAM,IAAIK,MAAOhB,EAAQ,6CAA8CY,EAAKK,gBAE7EN,EAAQ,IAAIG,KAAMH,GAEnB,GAAc,WAATE,EAAoB,CACxB,IAAML,EAAUU,KAAMP,GACrB,MAAM,IAAIK,MAAOhB,EAAQ,mFAAoFY,EAAKK,gBAElF,KAA5BN,EAAMQ,WAAWC,SACrBT,GAAS,KAEVA,EAAQ,IAAIG,KAAMH,GAEnB,KAAOA,aAAiBG,MACvB,MAAM,IAAIO,UAAWrB,EAAQ,gHAAiHY,IAE/I,OAAOD,EAuHR,ICtJAW,EDiEA,SAAoBC,EAAOC,EAAMJ,EAAQK,GACxC,IAAIC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EASJ,GAPAP,EAAM,IACNC,GAAM,EACNF,EAAO,CACNtB,MAAS,SAEVmB,EAAQb,EAAWa,EAAO,SAC1BC,EAAOd,EAAWc,EAAM,QACnBW,UAAUf,OAAS,EAAI,CAc3B,GAb0B,IAArBe,UAAUf,OACTtB,EAAUsB,GACdM,EAAON,GAEPO,EAAMP,EAGNQ,GAAM,IAGPF,EAAOD,EACPE,EAAMP,GAEM,IAARO,EACJ,MAAO,GAER,IAAMlC,EAAWkC,IAASA,EAAM,EAC/B,MAAM,IAAIN,UAAWrB,EAAQ,oEAAqE2B,IAEnG,GAAKC,EAAM,CACV,IAAM9B,EAAU4B,GACf,MAAM,IAAIL,UAAWrB,EAAQ,qEAAsE0B,IAEpG,GAAKnC,EAAYmC,EAAM,SAAY,CAClC,IAAM/B,EAAU+B,EAAKtB,OACpB,MAAM,IAAIiB,UAAWrB,EAAQ,8DAA+D,QAAS0B,EAAKtB,QAE3G,IAAyC,IAApCK,EAAS2B,QAASV,EAAKtB,OAC3B,MAAM,IAAIY,MAAOhB,EAAQ,kEAAmE,QAASS,EAAS4B,KAAM,YAKxH,OAASX,EAAKtB,OACd,IAAK,QACJ2B,EAAM3B,EACN,MACD,IAAK,OACJ2B,EAAMzB,EACN,MAED,QACCyB,EAAM7B,EAaP,IARA4B,EAAMH,EAAM,EACZM,GAAMT,EAAKc,UAAYf,EAAMe,WAAcR,EAI3CE,EAAMT,GADNM,EAAM,IAAIU,MAAOZ,IAEZ,GAAMK,EACXA,EAAMA,EAAIM,UACJJ,EAAI,EAAGA,EAAIJ,EAAKI,IACrBF,GAAOC,EACPJ,EAAKK,GAAM,IAAIpB,KAAMiB,EAAKC,IAG3B,OADAH,EAAKC,GAAQN,EACNK"}